<div class="addContainer">
  @if (!isDetails) {
  <div class="contact-form">
    <div class="modalHeader">
      <div class="avatarDetails">
        <label class="hoverable" for="tableFileInput">
          <img [src]='leaves.img' alt="avatar">
        </label>
        <div class="modalTitle">
          {{dialogTitle}}
        </div>
      </div>
      <button mat-icon-button (click)="dialogRef.close()" class="modal-close-button" aria-label="Close dialog">
        <mat-icon>close</mat-icon>
      </button>
    </div>
    <div mat-dialog-content>
      <form class="register-form m-4" [formGroup]="leavesForm" (ngSubmit)="submit()">
        <div class="row">
          <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
            <mat-form-field class="example-full-width mb-3" appearance="outline">
              <mat-label>Name</mat-label>
              <input matInput formControlName="name" required>
              @if (leavesForm.get('name')?.hasError('required')) {
              <mat-error>Name is required</mat-error>
              }
            </mat-form-field>
          </div>
          <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
            <mat-form-field class="example-full-width mb-3" appearance="outline">
              <mat-label>Leave Type</mat-label>
              <mat-select formControlName="type" required>
                <mat-option [value]="'Sick Leave'">Sick Leave</mat-option>
                <mat-option [value]="'Maternity Leave'">Maternity Leave</mat-option>
                <mat-option [value]="'Casual Leave'">Casual Leave</mat-option>
                <mat-option [value]="'Medical Leave'">Medical Leave</mat-option>
              </mat-select>
              @if (leavesForm.get('type')?.hasError('required') || leavesForm.get('type')?.touched) {
              <mat-error>
                Please select a leave type
              </mat-error>
              }
            </mat-form-field>
          </div>
        </div>
        <div class="row">
          <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
            <mat-form-field class="example-full-width mb-3" appearance="outline">
              <mat-label>Leave From</mat-label>
              <input matInput [matDatepicker]="picker2" formControlName="from">
              <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
              <mat-datepicker #picker2></mat-datepicker>
              @if (leavesForm.get('from')?.hasError('required')) {
              <mat-error>Please select date</mat-error>
              }
            </mat-form-field>
          </div>
          <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
            <mat-form-field class="example-full-width mb-3" appearance="outline">
              <mat-label>Leave To</mat-label>
              <input matInput [matDatepicker]="picker" formControlName="leaveTo">
              <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
              @if (leavesForm.get('leaveTo')?.hasError('required')) {
              <mat-error>Please select date</mat-error>
              }
            </mat-form-field>
          </div>
        </div>
        <div class="row">
          <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
            <mat-form-field class="example-full-width mb-3" appearance="outline">
              <mat-label>No Of Days</mat-label>
              <input matInput formControlName="noOfDays" required>
            </mat-form-field>
          </div>
          <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
            <mat-form-field class="example-full-width" appearance="outline">
              <mat-label>Status</mat-label>
              <mat-select formControlName="status" required>
                <mat-option [value]="'Approved'">Approved</mat-option>
                <mat-option [value]="'Rejected'">Rejected</mat-option>
                <mat-option [value]="'Pending'">Pending</mat-option>
              </mat-select>
              @if (leavesForm.get('status')?.hasError('required')) {
              <mat-error>Status is required</mat-error>
              }
            </mat-form-field>
          </div>
        </div>
        <div class="row">
          <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
            <mat-form-field class="example-full-width mb-3" appearance="outline">
              <mat-label>Employee ID</mat-label>
              <input matInput formControlName="employeeId" required>
            </mat-form-field>
          </div>
          <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
            <mat-form-field class="example-full-width mb-3" appearance="outline">
              <mat-label>Department</mat-label>
              <input matInput formControlName="department" required>
            </mat-form-field>
          </div>
        </div>
        <div class="row">
          <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
            <mat-form-field class="example-full-width mb-3" appearance="outline">
              <mat-label>Duration Type</mat-label>
              <input matInput formControlName="durationType" required>
            </mat-form-field>
          </div>
          <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
            <mat-form-field class="example-full-width mb-3" appearance="outline">
              <mat-label>Requested On</mat-label>
              <input matInput formControlName="requestedOn" [readonly]="true">
            </mat-form-field>
          </div>
        </div>
        <div class="row">
          <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-2">
            <mat-form-field class="example-full-width mb-3" appearance="outline">
              <mat-label>Reason</mat-label>
              <textarea matInput formControlName="reason"></textarea>
            </mat-form-field>
          </div>
        </div>
        <div class="row">
          <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-2">
            <mat-form-field class="example-full-width mb-3" appearance="outline">
              <mat-label>Note</mat-label>
              <textarea matInput formControlName="note"></textarea>
            </mat-form-field>
          </div>
        </div>
        <div class="row">
          <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-2">
            <div class="example-button-row">
              <button mat-flat-button class="formSubmitBtn" [disabled]="!leavesForm.valid" [mat-dialog-close]="1"
                type="submit">Save</button>
              <button mat-flat-button mat-dialog-close class="formCancelBtn" tabindex="-1">Cancel</button>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
  }
  @if (isDetails) {
  <div class="contact-details">
    <div class="modalHeader">
      <div class="avatarDetails">
        <label class="hoverable" for="tableFileInput">
          <img [src]='leaves.img' alt="avatar">
        </label>
        <div class="modalTitle">
          {{dialogTitle}}
        </div>
      </div>
      <button mat-icon-button (click)="dialogRef.close()" class="modal-close-button" aria-label="Close dialog">
        <mat-icon>close</mat-icon>
      </button>
    </div>
    <div mat-dialog-content>
      <mat-card-content>
        <div class="contact-details-field m-b-30">
          <i class="material-icons-outlined">receipt</i>
          <div class="contact-detail-info">{{leaves.type}}</div>
        </div>
        <div class="contact-details-field m-b-30">
          <i class="material-icons-outlined">today</i>
          <div class="contact-detail-info">{{leaves.from | date: 'MMMM d, yyyy'}}</div>
        </div>
        <div class="contact-details-field m-b-30">
          <i class="material-icons-outlined">fact_check</i>
          <div class="contact-detail-info">{{leaves.leaveTo | date: 'MMMM d, yyyy'}}</div>
        </div>
        <div class="contact-details-field m-b-30">
          <i class="material-icons-outlined">tag</i>
          <div class="contact-detail-info">{{leaves.noOfDays}}</div>
        </div>
        <div class="contact-details-field m-b-30">
          <i class="material-icons-outlined">info</i>
          <div class="contact-detail-info">{{leaves.status}}</div>
        </div>
        <div class="contact-details-field m-b-30">
          <i class="material-icons-outlined">description</i>
          <div class="contact-detail-info">{{leaves.reason}}</div>
        </div>
        <div class="contact-details-field m-b-30">
          <i class="material-icons-outlined">note</i>
          <div class="contact-detail-info">{{leaves.note}}</div>
        </div>
        <div class="contact-details-field m-b-30">
          <i class="material-icons-outlined">person</i>
          <div class="contact-detail-info">{{leaves.employeeId}}</div>
        </div>
        <div class="contact-details-field m-b-30">
          <i class="material-icons-outlined">business</i>
          <div class="contact-detail-info">{{leaves.department}}</div>
        </div>
        <div class="contact-details-field m-b-30">
          <i class="material-icons-outlined">access_time</i>
          <div class="contact-detail-info">{{leaves.durationType}}</div>
        </div>
        <div class="contact-details-field m-b-30">
          <i class="material-icons-outlined">calendar_today</i>
          <div class="contact-detail-info">{{leaves.requestedOn | date: 'MMMM d, yyyy'}}</div>
        </div>
        <div class="contact-details-field m-b-30">
          <i class="material-icons-outlined">person</i>
          <div class="contact-detail-info">{{leaves.approvedBy}}</div>
        </div>
        <div class="contact-details-field m-b-30">
          <i class="material-icons-outlined">calendar_today</i>
          <div class="contact-detail-info">{{leaves.approvalDate | date: 'MMMM d, yyyy'}}</div>
        </div>
        <div class="row">
          <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-2">
            <div class="example-button-row">
              <button mat-flat-button color="primary" (click)="approve()">Approve</button>
              <button mat-flat-button color="warn" (click)="reject()">Reject</button>
            </div>
          </div>
        </div>
      </mat-card-content>
    </div>
  </div>
  }
</div>